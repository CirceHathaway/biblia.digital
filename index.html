<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Biblia Reina-Valera 1960</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Una Biblia digital interactiva con modo offline y funciones de destacar y compartir versículos.">
  <meta name="theme-color" content="#333333">
  <link rel="stylesheet" href="css/styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <!-- PWA -->
  <link rel="manifest" href="./manifest.json">
  <link rel="icon" href="./icons/icon-192x192.png" type="image/png">
</head>
<body>
  <!-- Encabezado -->
  <header>
    <div class="top-nav">
      <!-- Botón Biblia (móvil/tablet) -->
      <button id="bibleBtn" class="bible-btn" aria-label="Abrir selector de libros">
        <i class="fa-solid fa-book-bible" aria-hidden="true"></i>
      </button>

      <!-- Título (escritorio) -->
      <h1 class="desktop-only"><a href="index.html">Mi Biblia</a></h1>

      <!-- Selector de versión centrado en móvil/tablet -->
      <div id="versionSelectorSlot" class="version-slot">
        <div class="version-selector">
          <div class="version-biblia" id="versionBiblia" title="Cambiar versión">RVR1960</div>
          <div class="version-menu" id="versionMenu"></div>
        </div>
      </div>

      <!-- Menú hamburguesa -->
      <button class="menu-toggle" id="menuToggle" aria-label="Menú"><i class="fas fa-bars"></i></button>

      <!-- Menú principal -->
      <nav>
        <ul class="menu-items" id="menuItems">
          <li><a href="favorito.html">Favoritos</a></li>
          <li><a href="devocionales.html">Devocionales</a></li>
          <li><a href="contacto.html">Contacto</a></li>
          <li><a href="https://circehathaway.github.io/radio.digital.nueva.vida/">Música</a></li>
          <li><a href="donaciones.html">Donaciones</a></li>
          <li><a id="appLink" href="#app"><span id="appLinkText">Obtener la App</span></a></li>
        </ul>
      </nav>
    </div>

    <!-- Barra con la referencia actual (móvil/tablet) -->
    <div class="current-ref-wrap">
      <div id="current-ref">Génesis 1</div>
    </div>
  </header>

  <!-- Modal selector móvil/tablet -->
  <div id="selector-modal" class="selector-modal" aria-hidden="true">
    <div class="selector-modal-inner">
      <div class="selector-modal-header">
        <button id="selector-back" class="selector-back" aria-label="Volver">
          <i class="fa-solid fa-arrow-left"></i>
        </button>
        <h2 id="selector-title">Mi Biblia</h2>
      </div>

      <!-- Buscador (visible en vista de libros) -->
      <div id="selector-search-wrap" class="selector-search-wrap">
        <input id="selector-search" type="text" placeholder="Buscar libros..." />
      </div>

      <!-- Contenido dinámico (libros / capítulos / versículos) -->
      <div id="selector-body" class="selector-body"></div>
    </div>
  </div>

  <!-- Sección de selección (se mantiene para escritorio, se oculta en móvil por CSS) -->
  <section class="busqueda-centrada">
    <!-- Selector unificado -->
    <div class="dropdown" id="selector-libro">
      <button class="dropdown-toggle" id="selector-toggle">Génesis</button>
      <div class="dropdown-content" id="selector-content"></div>
    </div>

    <!-- Versión de la Biblia (escritorio) -->
    <div class="version-selector desktop-only">
      <div class="version-biblia" id="versionBibliaDesktop" title="Cambiar versión">RVR1960</div>
      <div class="version-menu" id="versionMenuDesktop"></div>
    </div>

    <!-- Botón A+ -->
    <button id="aumentarLetra" class="dropdown-toggle">A+</button>
  </section>

  <!-- Botones fijos de navegación entre capítulos -->
  <button class="nav-capitulo izquierda" id="anteriorCapitulo" aria-label="Capítulo anterior">
    <i class="fa-solid fa-circle-chevron-left"></i>
  </button>
  <button class="nav-capitulo derecha" id="siguienteCapitulo" aria-label="Capítulo siguiente">
    <i class="fa-solid fa-circle-chevron-right"></i>
  </button>

  <!-- Contenedor de versículos -->
  <main>
    <div class="versiculos" id="versiculos"></div>
  </main>

  <!-- Pie de página -->
  <footer>
    <div class="footer-redes">
      <a href="https://www.facebook.com/profile.php?id=100076584407771" target="_blank" aria-label="Facebook" style="color: #1877F2;"><i class="fab fa-facebook"></i></a>
      <a href="https://www.instagram.com/radionuevavida19" target="_blank" aria-label="Instagram" style="color: #E1306C;"><i class="fab fa-instagram"></i></a>
      <a href="https://www.twitch.tv/radiodigitalnuevavida" target="_blank" aria-label="Twitch" style="color: #9146FF;"><i class="fab fa-twitch"></i></a>
      <a href="https://wa.me/+5491127005824" target="_blank" aria-label="WhatsApp" style="color: #25D366;"><i class="fab fa-whatsapp"></i></a>
      <a href="https://www.youtube.com/@Ecos_de_EsperanzaNV" target="_blank" aria-label="YouTube" style="color: #FF0000;"><i class="fab fa-youtube"></i></a>
      <a href="https://music.youtube.com/watch?v=l6WYVWeSnis&si=K8mk_Cl2JZkYqUbu" target="_blank" aria-label="YouTube Music" style="color: #FF0000;"><i class="fas fa-music"></i></a>
      <a href="https://open.spotify.com/intl-es/artist/5p1Ixdpl6I5fFb11MSeVXu?si=1N-_nxbSS1Sx5im_dbIU2w" target="_blank" aria-label="Spotify" style="color: #1DB954;"><i class="fab fa-spotify"></i></a>
    </div>
    <div class="footer-info">
      <span>© 2025 | Mi Biblia</span>
      <span>Servicio hecho por: <span style="color: red;">CirceHathaway</span></span>
    </div>
  </footer>

  <!-- Scripts -->
  <script type="module" src="js/biblia.js"></script>
  <script type="module" src="js/appLink.js"></script>

  <script>
    // Mostrar/ocultar menú hamburguesa en celular
    document.getElementById('menuToggle').addEventListener('click', () => {
      document.getElementById('menuItems').classList.toggle('show');
    });
  </script>

  <script>
    // Registra el SW bajo /biblia.digital/ con el scope correcto (GitHub Pages)
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        const base = (location.pathname.endsWith('/'))
          ? location.pathname
          : location.pathname.replace(/[^/]+$/, '');
        navigator.serviceWorker.register(`${base}service-worker.js`, { scope: base })
          .then(reg => console.log('SW registrado:', reg.scope))
          .catch(err => console.error('Error registrando SW:', err));
      });
    }
  </script>
</body>
</html>